#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>
#include <sys/types.h>
#include <sys/wait.h>


/* Handler for ALL */
void handleALL(int sig) {

	printf("J'ai reçu le signal de numéro %d.\n", sig);
}

/* Handler for SIGINT */
void handleSIGINT(int sig) {
	
	int k;

	/* Liaison de nouveaux handlers pour les signaux non masqués */
	for(k = 1; k < 32; k++) {
		signal(k, handleALL);
	}
	
	/* Attendre jusqu'à réception de signal non bloquant */
	while(1) {
		sleep(5);
		printf("Et hop, 5 secondes de plus pour le processus %d.\n", getpid());
	}
}

int main(int argc, char *argv[]) {
	
	signal(SIGINT, handleSIGINT);
	
	pause();
}
