#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>

int main(void) {
	int pid;
	int status;
	
	/* Création du processus fils */
	pid = fork();
	
	/* Dans le processus fils faire... */
	if(pid == 0) {
		/* Imprimer les valeurs de retour de fork, getpid, getppid */
		printf("Fork : 0; Getpid : %d; Getppid : %d\n", getpid(), getppid());
		/* Bloquer 4 secondes le processus */
		sleep(4);
		/* Terminer par exit(2) */
		exit(2);
	}
	/* Fans le processus père faire... */
	else {
		/* Imprimer les valeurs de retour de fork, getpid, getppid */
		printf("Fork : %d; Getpid : %d; Getppid : %d\n", pid, getpid(), getppid());
		/* Attendre le retour du fils */
		pid = wait(&status);
		/* Imprimer le code de retour du fils (2 attendu) */
		printf("Fils %d retourne %d\n", pid, WEXITSTATUS(status));
		/* Exercuter l'autre programme C */
		execl("ps229", "ps229", (char *) NULL);
	}
	
	return 0;
}

